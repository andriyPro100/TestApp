(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{30:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t),a.d(t,"endpoint",(function(){return I}));var n=a(0),s=a(24),r=a.n(s),i=(a(30),a(5)),c=a.n(i),l=a(6),o=a(12),d=a(7),j=a(1);function m(e){var t=e.text,a=e.color,n=e.onClick,s=e.type;return Object(j.jsx)("button",{type:s,className:a+" m-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white hover:bg-indigo-700 focus:outline-none focus:ring-0 focus:ring-offset-0 focus:ring-indigo-500",onClick:n,children:t})}var b,u,x=a.p+"static/media/person-icon.12ea4f36.png",p=a(16),f=a(17),h=a(10),O=a.n(h),v=a(41),N=a(25);function g(e){var t=e.values,a=e.openModal,s=e.setOpenModal,r=Object(f.a)({defaultValues:{firstName:t.firstName,lastName:t.lastName,phone:t.phone,avatarUrl:t.avatarUrl}}),i=r.register,u=r.handleSubmit,x=r.errors,p=Object(n.useState)({}),g=Object(d.a)(p,2),y=g[0],w=g[1],k=Object(v.a)(["updateClient"],function(e,t){return Object(l.a)(c.a.mark((function a(){var n,s;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O()(I,Object(h.gql)(b||(b=Object(o.a)(['mutation {\n                      updateClient(\n                        id: "','"\n                        firstName: "','"\n                        lastName: "','"\n                        phone: "','"\n                        avatarUrl: "','"\n                      ){\n                        id\n                      }\n                    }'])),t,e.firstName,e.lastName,e.phone,e.avatarUrl));case 2:return n=a.sent,s=n.data,a.abrupt("return",s);case 5:case"end":return a.stop()}}),a)})))}(y,t.id),{refetchOnWindowFocus:!1,enabled:!1}).refetch,F=Object(N.b)();return Object(j.jsxs)("form",{className:"flex flex-col",onSubmit:u((function(e){w(e),s(!a),k().then((function(){return F.invalidateQueries("g")}))})),children:[Object(j.jsx)("span",{children:"First name:"}),Object(j.jsx)("input",{className:"border-2",name:"firstName",ref:i({required:!0})}),Object(j.jsx)("span",{children:"Last name:"}),Object(j.jsx)("input",{className:"border-2",name:"lastName",ref:i({required:!0})}),Object(j.jsx)("span",{children:"Phone:"}),Object(j.jsx)("input",{className:"border-2",name:"phone",ref:i}),Object(j.jsx)("span",{children:"Image url:"}),Object(j.jsx)("input",{className:"border-2",name:"avatarUrl",ref:i}),x.firstName&&Object(j.jsx)("span",{children:"Field 'First name' is required"}),x.lastName&&Object(j.jsx)("span",{children:"Field 'Last name' is required"}),Object(j.jsxs)("div",{className:"flex flex-wrap content-between",children:[Object(j.jsx)(m,{type:"submit",text:"Edit",color:"bg-blue-500"}),Object(j.jsx)(m,{type:"button",text:"Cancel",color:"bg-red-500",onClick:function(){return s(!a)}})]})]})}function y(e){var t=e.values,a=e.openModal,n=e.setOpenModal;return Object(j.jsx)("div",{className:"relative ...",children:Object(j.jsx)(p.a,{show:a,enter:"transition ease-out duration-100 transform",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75 transform",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(j.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:Object(j.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(j.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Object(j.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Object(j.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(j.jsx)("div",{className:"p-10 inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:Object(j.jsx)(g,{values:t,openModal:a,setOpenModal:n})})]})})})})}function w(e){var t=e.data,a=Object(n.useState)(!1),s=Object(d.a)(a,2),r=s[0],i=s[1];return Object(j.jsxs)("tr",{className:"content-between",children:[Object(j.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(j.jsxs)("div",{className:"flex items-center",children:[Object(j.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:Object(j.jsx)("img",{className:"h-10 w-10 rounded-full",alt:t.lastName,src:t.avatarUrl?t.avatarUrl:x})}),Object(j.jsxs)("div",{className:"ml-6",children:[Object(j.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.firstName," ",t.lastName]}),Object(j.jsx)("div",{className:"text-sm text-gray-500",children:t.phone})]})]})}),Object(j.jsxs)("td",{className:"pl-40 pr-10",children:[Object(j.jsx)(y,{values:t,openModal:r,setOpenModal:i}),Object(j.jsx)(m,{text:"edit",color:"bg-green-500",onClick:function(){return i(!r)}})]})]})}var k,F=Object(h.gql)(u||(u=Object(o.a)(["\n    query {\n        getClients{\n            id\n            firstName\n            lastName\n            phone\n            avatarUrl\n        }\n    }"])));function C(){var e=Object(v.a)("g",Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()(I,F);case 2:return t=e.sent,e.abrupt("return",t.getClients);case 4:case"end":return e.stop()}}),e)})))),t=e.status,a=e.data;return Object(j.jsx)("div",{children:"loading"===t?"Loading...":"error"===t?"Error":Object(j.jsx)("div",{className:"mx-auto",children:Object(j.jsx)("div",{className:"flex flex-col",children:Object(j.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(j.jsx)("div",{className:"py-2 align-middle inline-block  sm:px-6 lg:px-8",children:Object(j.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(j.jsx)("table",{className:"divide-y divide-gray-200",children:Object(j.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((function(e){return Object(j.jsx)(w,{data:e},e.id)}))})})})})})})})})}function M(e){var t=e.openModal,a=e.setOpenModal,s=Object(f.a)(),r=s.register,i=s.handleSubmit,b=s.errors,u=Object(n.useState)({}),x=Object(d.a)(u,2),p=x[0],g=x[1],y=Object(v.a)(["addClient",p],function(e){return Object(l.a)(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O()(I,Object(h.gql)(k||(k=Object(o.a)(['mutation {\n                    addClient(\n                        firstName: "','"\n                        lastName: "','"\n                        phone: "','"\n                        avatarUrl: "','"\n                    ){\n                        id\n                        firstName\n                    }\n                }'])),e.firstName,e.lastName,e.phone,e.avatarUrl));case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))}(p),{refetchOnWindowFocus:!1,enabled:!1}).refetch,w=Object(N.b)();return Object(j.jsxs)("form",{className:"flex flex-col",onSubmit:i((function(e){g(e),a(!t),y().then((function(){return w.invalidateQueries("g")}))})),children:[Object(j.jsx)("span",{children:"First name:"}),Object(j.jsx)("input",{className:"border-2",name:"firstName",ref:r({required:!0})}),Object(j.jsx)("span",{children:"Last name:"}),Object(j.jsx)("input",{className:"border-2",name:"lastName",ref:r({required:!0})}),Object(j.jsx)("span",{children:"Phone:"}),Object(j.jsx)("input",{className:"border-2",name:"phone",ref:r}),Object(j.jsx)("span",{children:"Image url:"}),Object(j.jsx)("input",{className:"border-2",name:"avatarUrl",ref:r}),b.firstName&&Object(j.jsx)("span",{children:"Field 'First name' is required"}),b.lastName&&Object(j.jsx)("span",{children:"Field 'Last name' is required"}),Object(j.jsxs)("div",{className:"flex flex-wrap content-between",children:[Object(j.jsx)(m,{type:"submit",text:"Add",color:"bg-blue-500"}),Object(j.jsx)(m,{type:"button",text:"Cancel",color:"bg-red-500",onClick:function(){return a(!t)}})]})]})}function q(e){var t=e.openModal,a=e.setOpenModal;return Object(j.jsx)("div",{className:"relative ...",children:Object(j.jsx)(p.a,{show:t,enter:"transition ease-out duration-100 transform",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75 transform",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(j.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:Object(j.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(j.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Object(j.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Object(j.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(j.jsx)("div",{className:"p-10 inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:Object(j.jsx)(M,{openModal:t,setOpenModal:a})})]})})})})}var U=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],s=t[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(q,{openModal:a,setOpenModal:s}),Object(j.jsx)(m,{text:"Add client",color:"bg-blue-500",onClick:function(){return s(!a)}})]})},S=function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"container mx-auto my-10",children:[Object(j.jsx)(U,{}),Object(j.jsx)(C,{})]})})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))},T=a(40),I="https://test-task.expane.pro/api/graphql",P=new T.a;r.a.render(Object(j.jsx)(N.a,{client:P,children:Object(j.jsx)(S,{})}),document.getElementById("root")),L()}},[[37,1,2]]]);
//# sourceMappingURL=main.c2ce02ac.chunk.js.map